<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>방명록</title>
    <!-- 스타일과 스크립트 추가가 필요하면 여기에 -->
    <style>
        table {
            width: 40%;
            border-collapse: collapse;
            margin: 0 auto;
            margin-bottom: 20px;
        }

        table, th, td {
            border: 1px solid #ccc;
        }

        th, td {
            padding: 8px;
            text-align: left;
        }

        th {
            background-color: #f2f2f2;
        }

        .scrollable-table {
            max-height: 300px;
            overflow-y: scroll;
        }

        .actions {
            text-align: center;
            padding: 16px; /* 변경: 상하 여백 추가 */
            line-height: 15; /* 변경: 세로 크기 2배로 늘림 */
        }

        button {
            padding: 5px 10px;
            background-color: #426B1F;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
        }

        button {
            float : inherit;
        }

        .actions button {
            padding: 5px 10px;
            margin: 5px;
            background-color: #426B1F;
            color: white;
            border: none;
            border-radius: 4px;
        }

        .content-table {
            width: 40%;
            border-collapse: collapse;
            background-color: #888888;
        }

        /* 메타 정보 내부 요소들을 가로로 배열 */
        .meta-info {
            display: flex;
            align-items: center;
            gap: 10px; /* 아이콘과 텍스트 사이의 간격 */
        }

        /* 시간과 뷰 카운트 아이콘 스타일 */
        .clock-icon {
            width: 16px;
            height: 16px;
        }

        .horizontal-layout {
            display: flex;
            align-items: center;
            justify-content: space-between;  /* 추가된 속성 */
            gap: 20px;
        }

        /* 게시글 제목을 가로로 배열하기 위한 스타일 */
        h1 {
            margin: 0;
        }

        /* 메타 정보 내부 요소들을 가로로 배열 */
        .meta-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .no-cell {
            width: 10%;
        }

        /* 제목과 메타 정보 셀 스타일 */
        .title-meta-cell {
            width: 40%;
        }

        /* 작성자 셀 스타일 */
        .writer-cell {
            width: 15%;
        }

        /* 내용과 좋아요 셀 스타일 */
        .content-like-cell {
            width: 35%;
        }

        .horizontal-layout {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 20px;
        }

        .first-row {
            background-color: #f2f2f2;
        }

        .second-row {
            background-color: white;
            height: 200px;
        }

        .hidden-file-input {
            opacity: 0; /* 투명하게 만들기 */
            position: absolute; /* 페이지 레이아웃에 영향을 주지 않게 위치 지정 */
            pointer-events: none; /* 마우스 이벤트 무시 */
        }
    </style>
</head>
<body>

<div data-th-replace="header :: header"></div>

<form data-th-action="@{/board/add}" method='post' enctype='multipart/form-data'>
<table>
    <tr>
        <th>제목</th>
        <td><input type="text" name="title"></td>
    </tr>
    <tr>
        <th>내용</th>
        <td><textarea name="content" rows="4"></textarea></td>
    </tr>
    <input type='hidden' name='category' data-th-value="${param.category}">
    <input type='file' name='files' class='hidden-file-input' multiple placeholder="제목을 입력하세요"><br>
    <!--파일 선택 부분 투명으로 바꿔줌 -->
</table>
    <div style="text-align: center; margin-left:40%; margin-top:10%" >
        <button>등록</button>
    </div>
</form>


<!-- 게시글 목록을 출력하기 위한 Thymeleaf 반복문 -->
<div data-th-each="board : ${list}">
    <div class="container">
        <!-- 게시글 목록 -->
        <table class="content-table">
            <!-- 첫 번째 행: 번호, 제목, 메타 정보 -->
            <tr class="first-row">
                <td class="no-cell">
                    <span th:text="${board.no}"></span>
                </td>
                <td class="title-meta-cell" colspan="3">
                    <div class="horizontal-layout">
                        <span th:text="${board.title}"></span>
                        <div class="meta-info">
                            <img class="clock-icon" src="/images/clock.png">
                            <span th:text="${#dates.format(board.createdAt, 'yyyy-MM-dd')}"></span>
                            <img class="clock-icon" src="/images/eye.png">
                            <span th:text="${board.viewCount}"></span>
                        </div>
                    </div>
                </td>
            </tr>
            <!-- 두 번째 행: 작성자, 내용, 좋아요 -->
            <tr class="second-row">
                <td class="writer-cell">
                    <span th:text="${board.writer.name}"></span>
                    <span th:text="${board.writer.photo}"></span>
                </td>
                <td class="content-like-cell" colspan="3">
                    <span th:if="${board != null}" th:text="${board.content != null ? board.content : '내용입니다!'}"></span>
                    <button class="like-button" id="likeButton" th:if="${board != null}"
                            th:text="'❤️ 좋아요 (' + ${board.likes != null ? board.likes : '0'} + ')'"
                            th:attr="data-board-no=${board != null ? board.no : '0'}"
                            onclick="likeButtonClicked()">
                        ❤️ 좋아요 (0)
                    </button>
                </td>
            </tr>
        </table>

        <div class="btn-container">
            <a data-th-href="@{/board/delete(category=${board != null ? board.category : 'default'},no=${board != null ? board.no : '0'})}">
                <button>삭제</button>
            </a>
        </div>
    </div>
</div>
<div data-th-replace="footer :: footer"></div>
</body>
</html>
